<!-- -*- mode: jinja2 -*- -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="Documentation for Simple Fortran Project">
    <meta name="author" content="" >
    <link rel="icon" href="../favicon.png">

    <title>sd_channel_control &ndash; Simple Fortran Project</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link href="../css/fontawesome.min.css" rel="stylesheet">
    <link href="../css/brands.min.css" rel="stylesheet">
    <link href="../css/regular.min.css" rel="stylesheet">
    <link href="../css/solid.min.css" rel="stylesheet">
    <link href="../css/v4-font-face.min.css" rel="stylesheet">
    <link href="../css/v4-shims.min.css" rel="stylesheet">
    <!-- MathJax -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async
            integrity="sha256-DViIOMYdwlM/axqoGDPeUyf0urLoHMN4QACBKyB58Uw=" crossorigin="anonymous"></script>
    <!-- Other scripts and stylesheets -->
    <link href="../css/local.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <script src="../js/svg-pan-zoom.min.js"></script>
  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="container-fluid mb-sm-4 mb-xl-2">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="../index.html">Simple Fortran Project </a>
          <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar"
                  aria-expanded="false" aria-controls="navbar" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon">
          </button>

          <div id="navbar" class="navbar-collapse collapse">
            <ul class="navbar-nav">
                  <li class="nav-item">
                    <a class="nav-link" href="../lists/files.html">Source Files</a>
                  </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/modules.html">Modules</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/blockdata.html">Block Data</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/procedures.html">Procedures</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/absint.html">Abstract Interfaces</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/types.html">Derived Types</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/programs.html">Programs</a>
                </li>
            </ul>
              <div class="d-flex align-items-end flex-grow-1">
                <form action="../search.html" role="search" class="ms-auto">
                  <input type="text" class="form-control" aria-label="Search" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
                </form>
              </div>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
    </div>

    <div class="container">
  <div class="row">
    <h1>sd_channel_control
      <small>Subroutine</small>
      
    </h1>
      <div class="container p-2 mb-4 bg-light border rounded-3">
    <div class="row align-items-center justify-content-between" id="info-bar">
      <div class="col">
        <ul class="list-inline" style="margin-bottom:0px;display:inline">

            <li class="list-inline-item" id="statements"><i class="fa fa-list-ol"></i>
              <a data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-html="true"
                 title=" 0.5% of total for proc.">613 statements</a>
            </li>

            <li class="list-inline-item" id="source-file">
              <i class="fa fa-code"></i>
              <a href="../src/sd_channel_control.f90"> Source File</a>
            </li>
        </ul>
      </div>
      <div class="col">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb justify-content-end mb-0">
                <li class="breadcrumb-item"><a href='../sourcefile/sd_channel_control.f90~2.html'>sd_channel_control.f90</a></li>
            <li class="breadcrumb-item active" aria-current="page">sd_channel_control</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
  <script>
    // Enable Bootstrap tooltips
    (function () {
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    })();
  </script>

  </div>
  
  <div class="row">
    <div class="col-md-3 hidden-xs hidden-sm visible-md visible-lg">
      <div id="sidebar">
      <h3>Contents</h3>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

    <em>None</em>

  </div>

    </div>
    
    <div class="col-md-9" id='text'>
    <h2> subroutine sd_channel_control()  
</h2>
        <div class="card mb-4">
      <h3 class="card-header card-title bg-light">Uses</h3>
      <div class="card-body">
        <ul class="list-group list-group-flush">
            <li class="list-group-item">
              <ul class="list-inline">
                  <li class="list-inline-item"><a href='../module/conditional_module.html'>conditional_module</a></li>
                  <li class="list-inline-item"><a href='../module/hydrograph_module.html'>hydrograph_module</a></li>
                  <li class="list-inline-item"><a href='../module/channel_module~2.html'>channel_module</a></li>
                  <li class="list-inline-item"><a href='../module/time_module.html'>time_module</a></li>
                  <li class="list-inline-item"><a href='../module/ch_salt_module.html'>ch_salt_module</a></li>
                  <li class="list-inline-item"><a href='../module/sd_channel_module.html'>sd_channel_module</a></li>
                  <li class="list-inline-item"><a href='../module/constituent_mass_module~2.html'>constituent_mass_module</a></li>
                  <li class="list-inline-item"><a href='../module/ch_cs_module.html'>ch_cs_module</a></li>
                  <li class="list-inline-item"><a href='../module/basin_module~2.html'>basin_module</a></li>
                  <li class="list-inline-item"><a href='../module/channel_data_module~2.html'>channel_data_module</a></li>
                  <li class="list-inline-item"><a href='../module/ch_pesticide_module.html'>ch_pesticide_module</a></li>
                  <li class="list-inline-item"><a href='../module/climate_module~2.html'>climate_module</a></li>
                  <li class="list-inline-item"><a href='../module/gwflow_module~2.html'>gwflow_module</a></li>
                  <li class="list-inline-item"><a href='../module/water_allocation_module~2.html'>water_allocation_module</a></li>
                  <li class="list-inline-item"><a href='../module/water_body_module.html'>water_body_module</a></li>
                  <li class="list-inline-item"><a href='../module/channel_velocity_module.html'>channel_velocity_module</a></li>
              </ul>
            </li>
        </ul>
      </div>
    </div>


    <p>!  nbs added 7-20-23
 set ht1 to incoming hydrograph
 add water transfer
 adjust precip and temperature for elevation using lapse rates
 if connected to aquifer - add flow
 set inflow hyds for printing
 set outgoing flow and sediment - ht2
 compute changes in channel dimensions
 compute flow and travel time at bankfull depth
 OVERBANK FLOOD</p>
<p>estimate overbank flow - assume a triangular hyd
 add overbank to wetland storage of hru(s)
 assume the element is an hru
 CHANNELIZED FLOW
 find the crossectional area and depth for volrt
 by iteration method at 1cm interval depth
 find the depth until the discharge rate is equal to volrt</p>
<p>adjust peak rate for headcut advance -also adjusts CEAP gully from
 edge-of-field to trib (assuming rectangular shape and constant tc)
 new q*qp (m3 * m3/s) equation for entire runoff event</p>
<p>compute sediment yield from headcut- assume bd = 1.2 t/m3
 assume channel dimensions are same as data file</p>
<p>Peters latest channel erosion model
vel = 1.37 * (sd_ch(ich)%chs ** 0.31) * (12. * sd_ch(ich)%chw) ** 0.32      !annual ave for SWIFT
 mean daily to peak ratio developed from GARDAY - THE STUDY OF MOST PROBABLE MEAN DAILY BANKFULL RUNOFF VOLUMES 
 IN SMALL WATERSHEDS DOMINATED BY CONVECTIVE/FRONTAL CHANNEL FORMING EVENTS AND THE CO-INCIDENT INNER BERM CHANNELS â€“ PART I. 
 Another eq from Peter - Qmax=Qmean<em>(1+2.66</em>Drainage Area^-.3)
 interpolate rating curve using peak rate
 use peakrate as flow rate
 calc soil cohesion
 vel_cr = log10(8.8 * rcurv%dep / 0.004) * (0.0004 * ((1377.-1000.) * 9.81 * 0.004 + 0.021 * cohes + veg)) ** 0.5
 calculate radius of curvature
 calc mass of sediment eroded -&gt; t = bankcut (m) * depth (m) * lengthcut (m) * bd (t/m3)
 arc length = 0.33 * meander wavelength * sinuosity  -&gt; protected length 
 no downcutting below equilibrium slope
 calc critical shear and shear on bottom of channel
 Pa = N/m^2 * m * m/m
 if bottom shear &gt; d50 -&gt; downcut - widen to maintain width depth ratio
 calc mass of sediment eroded -&gt; t = cm * m/100cm * width (m) * length (km) * 1000 m/km * bd (t/m3)
 adjust for incoming bedload and compute deposition
 stream is completely filled in
 compute flood plain deposition
 deposit Particulate P and N in the floodplain</p>
<p>compute sediment leaving the channel - washload only
 set values for outflow hydrograph
 calculate flow velocity and travel time  ht2 = ht1 
 use modified qual-2e routines
 total incoming to output to SWIFT
 convert mass to concentration
 convert storage hyd - mass to concentration
 convert outflow and storage hyds - concentration to mass
 compute nutrient losses using 2-stage ditch model</p>
<p>reset sed to tons
 subtract nutrients deposited in floodplain
 add nutrients from bank erosion - t * mg/kg (ppm) * kg/1000 mg * 1000 kg/t = kg
 route constituents
 call mike winchell's new routine for pesticide routing</p>
<p>compute water balance - precip, evap and seep
 km * m * 1000 m/km * ha/10000 m2 = ha
 m3 = 10. * mm * ha
 add precip
 subtract seepage
 subtract evaporation
 adjust entire hydrograph for losses
 total outgoing to output to SWIFT
 calculate hydrograph leaving reach and storage in channel</p>
<p>travel time &lt; timestep -- route all stored and frac of incoming
 travel time &gt; timestep -- then all incoming is stored and frac of stored is routed
 travel time &lt; timestep -- route all stored and frac of incoming
 check decision table for flow control - water diversion
 check decision table for water allocation
 set outflow hyd to ht2 after diverting water
 calculate stream temperature
 set constituents for routing
 output channel organic-mineral
 output channel morphology
 set pesticide output variables
 set values for recharge hydrograph - should be trans losses</p>


    <h3>Arguments</h3>
    <em>None</em>
    <br>




    <br>


    
    

    
    



    
    
    </div>
  </div>

      <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
        <div class="row justify-content-between">
          <div class="col">
            <p>
              Simple Fortran Project
              &copy; 2025 
</p>
          </div>
          <div class="col">
            <p class="text-end">
              Documentation generated by
              <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
            </p>
          </div>
        </div>
        <br>
      </div> <!-- /container -->
    </footer>
  </body>
</html>