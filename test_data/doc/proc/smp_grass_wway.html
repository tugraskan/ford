<!-- -*- mode: jinja2 -*- -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="Documentation for Fortran Program">
    <meta name="author" content="" >
    <link rel="icon" href="../favicon.png">

    <title>smp_grass_wway &ndash; Fortran Program</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link href="../css/fontawesome.min.css" rel="stylesheet">
    <link href="../css/brands.min.css" rel="stylesheet">
    <link href="../css/regular.min.css" rel="stylesheet">
    <link href="../css/solid.min.css" rel="stylesheet">
    <link href="../css/v4-font-face.min.css" rel="stylesheet">
    <link href="../css/v4-shims.min.css" rel="stylesheet">
    <!-- MathJax -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async
            integrity="sha256-DViIOMYdwlM/axqoGDPeUyf0urLoHMN4QACBKyB58Uw=" crossorigin="anonymous"></script>
    <!-- Other scripts and stylesheets -->
    <link href="../css/local.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <script src="../js/svg-pan-zoom.min.js"></script>
  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="container-fluid mb-sm-4 mb-xl-2">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="../index.html">Fortran Program </a>
          <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar"
                  aria-expanded="false" aria-controls="navbar" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon">
          </button>

          <div id="navbar" class="navbar-collapse collapse">
            <ul class="navbar-nav">
                  <li class="nav-item">
                    <a class="nav-link" href="../lists/files.html">Source Files</a>
                  </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/modules.html">Modules</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/procedures.html">Procedures</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/types.html">Derived Types</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../program/main.html">Program</a>
                </li>
            </ul>
              <div class="d-flex align-items-end flex-grow-1">
                <form action="../search.html" role="search" class="ms-auto">
                  <input type="text" class="form-control" aria-label="Search" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
                </form>
              </div>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
    </div>

    <div class="container">
  <div class="row">
    <h1>smp_grass_wway
      <small>Subroutine</small>
      
    </h1>
      <div class="container p-2 mb-4 bg-light border rounded-3">
    <div class="row align-items-center justify-content-between" id="info-bar">
      <div class="col">
        <ul class="list-inline" style="margin-bottom:0px;display:inline">

            <li class="list-inline-item" id="statements"><i class="fa fa-list-ol"></i>
              <a data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-html="true"
                 title=" 0.2% of total for proc.">148 statements</a>
            </li>

            <li class="list-inline-item" id="source-file">
              <i class="fa fa-code"></i>
              <a href="../src/smp_grass_wway.f90"> Source File</a>
            </li>
        </ul>
      </div>
      <div class="col">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb justify-content-end mb-0">
                <li class="breadcrumb-item"><a href='../sourcefile/smp_grass_wway.f90.html'>smp_grass_wway.f90</a></li>
            <li class="breadcrumb-item active" aria-current="page">smp_grass_wway</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
  <script>
    // Enable Bootstrap tooltips
    (function () {
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    })();
  </script>

  </div>
  
  <div class="row">
    <div class="col-md-3 hidden-xs hidden-sm visible-md visible-lg">
      <div id="sidebar">
      <h3>Contents</h3>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

    <em>None</em>

  </div>

    </div>
    
    <div class="col-md-9" id='text'>
    <h2> subroutine smp_grass_wway()  
</h2>
        <div class="card mb-4">
      <h3 class="card-header card-title bg-light">Uses</h3>
      <div class="card-body">
        <ul class="list-group list-group-flush">
            <li class="list-group-item">
              <ul class="list-inline">
                  <li class="list-inline-item"><a href='../module/output_ls_pesticide_module.html'>output_ls_pesticide_module</a></li>
                  <li class="list-inline-item"><a href='../module/channel_velocity_module.html'>channel_velocity_module</a></li>
                  <li class="list-inline-item"><a href='../module/constituent_mass_module.html'>constituent_mass_module</a></li>
                  <li class="list-inline-item"><a href='../module/hru_module.html'>hru_module</a></li>
              </ul>
            </li>
        </ul>
      </div>
    </div>


    <div class="codehilite"><pre><span></span><code>~ ~ ~ PURPOSE ~ ~ ~
this subroutine controls the grass waterways                      
~ ~ ~ INCOMING VARIABLES ~ ~ ~
name          |units         |definition
~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
ihru            |none          |HRU number
surfq(:)      |mm H2O        |amount of water in surface runoff generated
</code></pre></div>

<p>grwat_l(:)      |km               |Length of Grass Waterway
  grwat_w(:)      |none          |Width of grass waterway
  grwat_s(:)      |m/m           |Slope of grass waterway
  grwat_spcon(:)  |none          |sediment transport coefficant defined by user
  tc_gwat(:)      |none          |Time of concentration for Grassed waterway and its drainage area
    surfq(:)        |mm H2O        |surface runoff generated on day in HRU
    ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
    ~ ~ ~ OUTGOING VARIABLES ~ ~ ~
    name        |units         |definition
    ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
    ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
    ~ ~ ~ LOCAL DEFINITIONS ~ ~ ~
    name        |units         |definition
    ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
    qp_cms      |m^3/s         |peak runoff rate for the day 
    rcharea     |m^2           |cross-sectional area of flow
    ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~
    ~ ~ ~ SUBROUTINES/FUNCTIONS CALLED ~ ~ ~</p>
<div class="codehilite"><pre><span></span><code><span class="o">~</span> <span class="o">~</span> <span class="o">~</span> <span class="o">~</span> <span class="o">~</span> <span class="o">~</span> <span class="kr">END</span> <span class="n">SPECIFICATIONS</span> <span class="o">~</span> <span class="o">~</span> <span class="o">~</span> <span class="o">~</span> <span class="o">~</span> <span class="o">~</span>
</code></pre></div>

<p>do this only if there is surface runoff this day
 compute channel peak rate using SCS triangular unit hydrograph
 calculate average flow based on 3 hours of runoff
 if peak rate is greater than bankfull discharge
 find the crossectional area and depth for todays flow
 by iteration method at 1cm interval depth
 find the depth until the discharge rate is equal to volrt
 Sediment yield (t) from fraction of area drained by waterway
 Calculate sediment losses in sheetflow at waterway sides
 calculate area of sheeflow in m^2 assume *:1 side slope 8.06 = (8^2+1^2)^.5
 limit area of sheet flow to 10% of hru area
 Adjust Area to account for flow nonuniformities White and Arnold 2009 found half of flow in VFS
handled by 10% of VFS area. Waterways likely even more concentrated Assume only 20% of sideslope acts as filters
 calculate runoff depth over sheetflow area in mm
 Calculate sediment load on sheetflow area kg/m2
 Calculate runoff and sediment losses taken from mostly from filter.f
 surq_remove = 75.8 - 10.8 * Log(sf_depth) + 25.9 * Log(sol_k(1,j))
 Simpler form derived from vfsmod simulations. r2 = 0.57 Publication pending White and Arnold 2008
 calculate flow velocity
 compute deposition in the waterway
 if there is significant flow calculate 
 Calculate sediment concentration in inflow mg/m^3
 Calculate sediment transport capacity mg/m^3
 Calculate deposition in mg
 Calculate sediment out of waterway channel
 Calculate total fraction of sediment and surface runoff transported
 Subtract reductions from sediment, nutrients, bacteria, and pesticides NOT SURFACE RUNOFF to protect water balance
 Calculate pesticide removal 
 based on the sediment and runoff removal only
 surfq(j) &gt; 0.001</p>


    <div class="card mb-3">
      <a data-bs-toggle="collapse" href="#arguments-section" 
         aria-expanded="true" 
         aria-controls="arguments-section" 
         class="text-decoration-none">
        <h3 class="card-header bg-light text-dark">
          <i class="fa fa-caret-down me-2"></i>Arguments
        </h3>
      </a>
      <div id="arguments-section" class="collapse show">
        <div class="card-body">
            <em>None</em>
        </div>
      </div>
    </div>


    <div class="card mb-3">
      <a data-bs-toggle="collapse" href="#local-variables-section" 
         aria-expanded="false" 
         aria-controls="local-variables-section" 
         class="text-decoration-none">
        <h3 class="card-header bg-light text-dark">
          <i class="fa fa-caret-down me-2"></i>Local Variables
        </h3>
      </a>
      <div id="local-variables-section" class="collapse">
        <div class="card-body">
            <table class="table table-striped varlist">
    <thead>
      <tr>
        <th scope="col">Type</th>
<th scope="col">Visibility</th>        <th scope="col">Attributes</th>
        <th scope="col"></th>
        <th scope="col">Name</th>
<th></th><th scope="col">Initial</th>        <th scope="col"></th>
    </thead>
    <tbody>
        <tr>
            <td>
              <span class="anchor" id="var-chflow_m3"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>chflow_m3</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-sf_area"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>sf_area</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-surq_remove"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>surq_remove</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-sed_remove"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>sed_remove</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-sf_sed"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>sf_sed</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-vc"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>vc</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-chflow_day"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>chflow_day</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-j"></span>
              integer,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>j</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-rchdep"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>rchdep</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-p"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>p</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-rh"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>rh</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-qman"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>qman</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-sedin"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>sedin</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-sf_depth"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>sf_depth</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-sedint"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>sedint</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-cyin"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>cyin</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-cych"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>cych</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-rcharea"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>rcharea</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-depnet"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>depnet</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-deg"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>deg</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-dep"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>dep</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-sedout"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>sedout</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-sed_frac"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>sed_frac</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-surq_frac"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>surq_frac</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-sedtrap"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>sedtrap</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-xrem"></span>
              real,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>xrem</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
        <tr>
            <td>
              <span class="anchor" id="var-k"></span>
              integer,
            </td>
              <td>private</td>
            <td>
              
            </td>
            <td>::</td>
            <td><strong>k</strong></td>
                <td></td>
                <td></td>
            <td>
                
            </td>
        </tr>
    </tbody>
  </table>

        </div>
      </div>
    </div>
    <br>

    <div class="card mb-3">
      <a data-bs-toggle="collapse" href="#outside-variables-section" 
         aria-expanded="false" 
         aria-controls="outside-variables-section" 
         class="text-decoration-none">
        <h3 class="card-header bg-light text-dark">
          <i class="fa fa-caret-down me-2"></i>Outside Variables and Types Used
        </h3>
      </a>
      <div id="outside-variables-section" class="collapse">
        <div class="card-body">
              
    <div class="accordion" id="outsideVarsAccordion">
        <div class="accordion-item">
          <h3 class="accordion-header" id="headingtype__a_href___workspaces_ford_test_data_doc_type_object_pesticide_balance_html__object_pesticide_balance__a__">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#collapsetype__a_href___workspaces_ford_test_data_doc_type_object_pesticide_balance_html__object_pesticide_balance__a__" aria-expanded="false" 
                    aria-controls="collapsetype__a_href___workspaces_ford_test_data_doc_type_object_pesticide_balance_html__object_pesticide_balance__a__">
              type(<a href='../type/object_pesticide_balance.html'>object_pesticide_balance</a>)
              <small class="text-muted ms-2">(1 attribute from output_ls_pesticide_module)</small>
            </button>
          </h3>
          <div id="collapsetype__a_href___workspaces_ford_test_data_doc_type_object_pesticide_balance_html__object_pesticide_balance__a__" class="accordion-collapse collapse" 
               aria-labelledby="headingtype__a_href___workspaces_ford_test_data_doc_type_object_pesticide_balance_html__object_pesticide_balance__a__" data-bs-parent="#outsideVarsAccordion">
            <div class="accordion-body">
              <table class="table table-sm">
                <thead>
                  <tr>
                    <th scope="col">Attribute Name</th>
                    <th scope="col">Description</th>
                  </tr>
                </thead>
                <tbody>
                    <tr>
                      <td><strong>hpestb_d</strong></td>
                      <td></td>
                    </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h3 class="accordion-header" id="headingtype__a_href___workspaces_ford_test_data_doc_type_channel_velocity_parameters_html__channel_velocity_parameters__a__">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#collapsetype__a_href___workspaces_ford_test_data_doc_type_channel_velocity_parameters_html__channel_velocity_parameters__a__" aria-expanded="false" 
                    aria-controls="collapsetype__a_href___workspaces_ford_test_data_doc_type_channel_velocity_parameters_html__channel_velocity_parameters__a__">
              type(<a href='../type/channel_velocity_parameters.html'>channel_velocity_parameters</a>)
              <small class="text-muted ms-2">(1 attribute from channel_velocity_module)</small>
            </button>
          </h3>
          <div id="collapsetype__a_href___workspaces_ford_test_data_doc_type_channel_velocity_parameters_html__channel_velocity_parameters__a__" class="accordion-collapse collapse" 
               aria-labelledby="headingtype__a_href___workspaces_ford_test_data_doc_type_channel_velocity_parameters_html__channel_velocity_parameters__a__" data-bs-parent="#outsideVarsAccordion">
            <div class="accordion-body">
              <table class="table table-sm">
                <thead>
                  <tr>
                    <th scope="col">Attribute Name</th>
                    <th scope="col">Description</th>
                  </tr>
                </thead>
                <tbody>
                    <tr>
                      <td><strong>grwway_vel</strong></td>
                      <td></td>
                    </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h3 class="accordion-header" id="headingtype">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#collapsetype" aria-expanded="false" 
                    aria-controls="collapsetype">
              type
              <small class="text-muted ms-2">(1 attribute from constituent_mass_module)</small>
            </button>
          </h3>
          <div id="collapsetype" class="accordion-collapse collapse" 
               aria-labelledby="headingtype" data-bs-parent="#outsideVarsAccordion">
            <div class="accordion-body">
              <table class="table table-sm">
                <thead>
                  <tr>
                    <th scope="col">Attribute Name</th>
                    <th scope="col">Description</th>
                  </tr>
                </thead>
                <tbody>
                    <tr>
                      <td><strong>cs_db%num_pests</strong></td>
                      <td>None</td>
                    </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h3 class="accordion-header" id="headingtype__a_href___workspaces_ford_test_data_doc_type_hydrologic_response_unit_html__hydrologic_response_unit__a__">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#collapsetype__a_href___workspaces_ford_test_data_doc_type_hydrologic_response_unit_html__hydrologic_response_unit__a__" aria-expanded="false" 
                    aria-controls="collapsetype__a_href___workspaces_ford_test_data_doc_type_hydrologic_response_unit_html__hydrologic_response_unit__a__">
              type(<a href='../type/hydrologic_response_unit.html'>hydrologic_response_unit</a>)
              <small class="text-muted ms-2">(1 attribute from hru_module)</small>
            </button>
          </h3>
          <div id="collapsetype__a_href___workspaces_ford_test_data_doc_type_hydrologic_response_unit_html__hydrologic_response_unit__a__" class="accordion-collapse collapse" 
               aria-labelledby="headingtype__a_href___workspaces_ford_test_data_doc_type_hydrologic_response_unit_html__hydrologic_response_unit__a__" data-bs-parent="#outsideVarsAccordion">
            <div class="accordion-body">
              <table class="table table-sm">
                <thead>
                  <tr>
                    <th scope="col">Attribute Name</th>
                    <th scope="col">Description</th>
                  </tr>
                </thead>
                <tbody>
                    <tr>
                      <td><strong>hru</strong></td>
                      <td></td>
                    </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h3 class="accordion-header" id="headingreal">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#collapsereal" aria-expanded="false" 
                    aria-controls="collapsereal">
              real
              <small class="text-muted ms-2">(16 attributes from hru_module)</small>
            </button>
          </h3>
          <div id="collapsereal" class="accordion-collapse collapse" 
               aria-labelledby="headingreal" data-bs-parent="#outsideVarsAccordion">
            <div class="accordion-body">
              <table class="table table-sm">
                <thead>
                  <tr>
                    <th scope="col">Attribute Name</th>
                    <th scope="col">Description</th>
                  </tr>
                </thead>
                <tbody>
                    <tr>
                      <td><strong>qp_cms</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>sdti</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>sanyld</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>silyld</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>clayld</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>sagyld</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>lagyld</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>tc_gwat</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>surqsolp</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>sedminpa</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>sedminps</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>sedorgn</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>sedorgp</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>sedyld</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>surfq</strong></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td><strong>surqno3</strong></td>
                      <td></td>
                    </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h3 class="accordion-header" id="headinginteger">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#collapseinteger" aria-expanded="false" 
                    aria-controls="collapseinteger">
              integer
              <small class="text-muted ms-2">(1 attribute from hru_module)</small>
            </button>
          </h3>
          <div id="collapseinteger" class="accordion-collapse collapse" 
               aria-labelledby="headinginteger" data-bs-parent="#outsideVarsAccordion">
            <div class="accordion-body">
              <table class="table table-sm">
                <thead>
                  <tr>
                    <th scope="col">Attribute Name</th>
                    <th scope="col">Description</th>
                  </tr>
                </thead>
                <tbody>
                    <tr>
                      <td><strong>ihru</strong></td>
                      <td><p>none |HRU number</p><a href="../module/hru_module.html#variable-ihru~24" class="pull-right"><emph>Read more&hellip;</emph></a></td>
                    </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
    </div>

        </div>
      </div>
    </div>
    <br>


    <br>

    <br>

    <div class="card mb-3">
      <a data-bs-toggle="collapse" href="#logic-blocks-section" 
         aria-expanded="false" 
         aria-controls="logic-blocks-section" 
         class="text-decoration-none">
        <h3 class="card-header bg-light text-dark">
          <i class="fa fa-caret-down me-2"></i>Logic Blocks
        </h3>
      </a>
      <div id="logic-blocks-section" class="collapse">
        <div class="card-body">
          <p class="text-muted mb-3">
            Control flow structures organized as they appear in the source code. 
            Each block is collapsible to help navigate complex procedures.
          </p>
          
                        
                <div class="card mb-2 ms-0">
                  <div class="card-body">
                    <pre class="mb-0"><code>use hru_module, only : hru, surfq, sedyld, ihru, clayld, sanyld, silyld, sagyld, lagyld,  &
sedminpa, sedminps, sedorgp, surqsolp, sedorgn, surqno3, tc_gwat, qp_cms, sdti
use constituent_mass_module
use channel_velocity_module
use output_ls_pesticide_module
implicit none
real :: chflow_m3 = 0.         !m^3/s         |Runoff in CMS
real :: sf_area = 0.           !m^2           |area of waterway sides in sheetflow
real :: surq_remove = 0.       !%             |percent of surface runoff capture in VFS
real :: sed_remove = 0.        !%             |percent of sediment capture in VFS
real :: sf_sed = 0.            !kg/m^2        |sediment loads on sides of waterway
real :: vc = 0.                !m/s           |flow velocity in reach
real :: chflow_day = 0.        !m^3/day       |Runoff
integer :: j = 0               !none          |HRU number
real :: rchdep = 0.            !m             |depth of flow on day
real :: p = 0.                 !              |
real :: rh = 0.                !m             |hydraulic radius
real :: qman                   !m^3/s or m/s  |flow rate or flow velocity
real :: sedin = 0.             !mg            |Sediment in waterway
real :: sf_depth = 0.          !              |
real :: sedint = 0.            !mg            |Sediment into waterway channel
real :: cyin = 0.              !              |
real :: cych = 0.              !              |
real :: rcharea = 0.
real :: depnet = 0.            !metric tons   |
real :: deg = 0.               !metric tons   |sediment reentrained in water by channel
real :: dep = 0.               !              |
real :: sedout = 0.            !mg            | Sediment out of waterway channel
real :: sed_frac = 0.          !              |
real :: surq_frac = 0.         !              |
real :: sedtrap = 0.           !              |
real :: xrem = 0.              !              |
integer :: k = 0               !m^3/s         |Total number of HRUs plus this HRU number
j = ihru</code></pre>
                  </div>
                </div>

                        
              <div class="card mb-2 ms-0">
                <a data-bs-toggle="collapse" href="#block-2" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>IF</strong> (<code>surfq(j) > 0.001</code>) <strong>THEN</strong>
                  </div>
                </a>
                <div id="block-2" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>chflow_day = 1000. * surfq(j) * hru(ihru)%km
chflow_m3 = chflow_day / 10800
qp_cms = 2. * chflow_m3 / (1.5 * tc_gwat(j))
sedin = sedyld(j)
sf_area = (hru(j)%lumv%grwat_d - rchdep) * 8.06 * hru(j)%lumv%grwat_l * 1000.
sf_area =  Min(0.1 * hru(j)%area_ha * 10000., sf_area)
sedint = sedin * (1. - sed_remove / 100.)
vc = 0.001
cyin = 0.
cych = 0.
depnet = 0.
deg = 0.
dep = 0.
sedout = sedint - depnet
if (sedyld(j) < .0001) sedyld(j) = .0001
sed_frac =  sedout / sedyld(j)
if (sed_frac > 75.) sed_frac = 75.
if (sed_frac < 0.) sed_frac = 5.
surq_frac = 1 - surq_remove / 100.
if (sed_frac > 30.) sed_frac = 30.
if (sed_frac < 0.) sed_frac = 0.
sedtrap = sedyld(j) * (1. - sed_frac)
sedyld(j) = sedyld(j) * sed_frac
sedminpa(j) = sedminpa(j) * sed_frac
sedminps(j) = sedminps(j) * sed_frac
sedorgp(j) = sedorgp(j) * sed_frac
surqsolp(j) = surqsolp(j) * surq_frac
sedorgn(j) = sedorgn(j) * sed_frac
surqno3(j) = surqno3(j) * surq_frac
xrem = 0.
sanyld(j) = Max(0., sanyld(j))
silyld(j) = Max(0., silyld(j))
clayld(j) = Max(0., clayld(j))
sagyld(j) = Max(0., sagyld(j))
lagyld(j) = Max(0., lagyld(j))
end if  !! surfq(j) > 0.001
return</code></pre>
                                  
              <div class="card mb-2 ms-3">
                <a data-bs-toggle="collapse" href="#block-2-block-1" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>IF</strong> (<code>qp_cms > grwway_vel(j)%vel_bf</code>) <strong>THEN</strong>
                  </div>
                </a>
                <div id="block-2-block-1" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>rcharea = grwway_vel(j)%area
rchdep = hru(j)%lumv%grwat_d</code></pre>
                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-3">
                <a data-bs-toggle="collapse" href="#block-2-block-2" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>ELSE</strong>
                  </div>
                </a>
                <div id="block-2-block-2" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>sdti = 0.
rchdep = 0.</code></pre>
                                  
              <div class="card mb-2 ms-6">
                <a data-bs-toggle="collapse" href="#block-2-block-2-block-1" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-warning bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>DO</strong> <code>While (sdti < qp_cms)</code>
                  </div>
                </a>
                <div id="block-2-block-2-block-1" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>rchdep = rchdep + 0.01
rcharea = (grwway_vel(j)%wid_btm + 8 * rchdep) * rchdep
p = grwway_vel(j)%wid_btm + 2. * rchdep * Sqrt(1. + 8 * 8)
rh = rcharea / p
sdti = Qman(rcharea, rh, hru(j)%lumv%grwat_n, hru(j)%lumv%grwat_s)</code></pre>
                  </div>
                </div>
              </div>

                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-3">
                <a data-bs-toggle="collapse" href="#block-2-block-3" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>IF</strong> (<code>sf_area > 1.e-6</code>) <strong>THEN</strong>
                  </div>
                </a>
                <div id="block-2-block-3" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>sf_area = sf_area * 0.20
sf_depth = surfq(j)  * hru(ihru)%area_ha * 10000. / sf_area
sf_sed = sedin * 1000. / sf_area</code></pre>
                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-3">
                <a data-bs-toggle="collapse" href="#block-2-block-4" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>IF</strong> (<code>sf_area > 0.</code>) <strong>THEN</strong>
                  </div>
                </a>
                <div id="block-2-block-4" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>surq_remove = 95.6 - 10.79 * Log(sf_depth)
if (surq_remove > 95.) surq_remove = 95.
if (surq_remove < 0.) surq_remove = 0.
sed_remove = 79.0 - 1.04 * sf_sed + 0.213 * surq_remove
if (sed_remove > 95.) sed_remove = 95.
if (sed_remove < 0.) sed_remove = 0.</code></pre>
                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-3">
                <a data-bs-toggle="collapse" href="#block-2-block-5" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>ELSE</strong>
                  </div>
                </a>
                <div id="block-2-block-5" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>sed_remove = 0
surq_remove = 0</code></pre>
                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-3">
                <a data-bs-toggle="collapse" href="#block-2-block-6" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>IF</strong> (<code>rcharea > 1.e-4</code>) <strong>THEN</strong>
                  </div>
                </a>
                <div id="block-2-block-6" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>vc = qp_cms / rcharea
if (vc > grwway_vel(j)%celerity_bf) vc = grwway_vel(j)%celerity_bf</code></pre>
                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-3">
                <a data-bs-toggle="collapse" href="#block-2-block-7" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>IF</strong> (<code>chflow_m3 > 1.e-4</code>) <strong>THEN</strong>
                  </div>
                </a>
                <div id="block-2-block-7" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>cyin = sedint / chflow_day
cych = hru(j)%lumv%grwat_spcon * vc ** 1.5
depnet = chflow_day * (cyin - cych)
if (depnet < 0.) depnet = 0
if (depnet > sedint) depnet = sedint</code></pre>
                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-3">
                <a data-bs-toggle="collapse" href="#block-2-block-8" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>IF</strong> (<code>sedtrap <= lagyld(j)</code>) <strong>THEN</strong>
                  </div>
                </a>
                <div id="block-2-block-8" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>lagyld(j) = lagyld(j) - sedtrap</code></pre>
                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-3">
                <a data-bs-toggle="collapse" href="#block-2-block-9" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>ELSE</strong>
                  </div>
                </a>
                <div id="block-2-block-9" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>xrem = sedtrap - lagyld(j)
lagyld(j) = 0.</code></pre>
                                  
              <div class="card mb-2 ms-6">
                <a data-bs-toggle="collapse" href="#block-2-block-9-block-1" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>IF</strong> (<code>xrem <= sanyld(j)</code>) <strong>THEN</strong>
                  </div>
                </a>
                <div id="block-2-block-9-block-1" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>sanyld(j) = sanyld(j) - xrem</code></pre>
                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-6">
                <a data-bs-toggle="collapse" href="#block-2-block-9-block-2" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>ELSE</strong>
                  </div>
                </a>
                <div id="block-2-block-9-block-2" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>xrem = xrem - sanyld(j)
sanyld(j) = 0.</code></pre>
                                  
              <div class="card mb-2 ms-9">
                <a data-bs-toggle="collapse" href="#block-2-block-9-block-2-block-1" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>IF</strong> (<code>xrem <= sagyld(j)</code>) <strong>THEN</strong>
                  </div>
                </a>
                <div id="block-2-block-9-block-2-block-1" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>sagyld(j) = sagyld(j) - xrem</code></pre>
                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-9">
                <a data-bs-toggle="collapse" href="#block-2-block-9-block-2-block-2" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>ELSE</strong>
                  </div>
                </a>
                <div id="block-2-block-9-block-2-block-2" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>xrem = xrem - sagyld(j)
sagyld(j) = 0.</code></pre>
                                  
              <div class="card mb-2 ms-12">
                <a data-bs-toggle="collapse" href="#block-2-block-9-block-2-block-2-block-1" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>IF</strong> (<code>xrem <= silyld(j)</code>) <strong>THEN</strong>
                  </div>
                </a>
                <div id="block-2-block-9-block-2-block-2-block-1" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>silyld(j) = silyld(j) - xrem</code></pre>
                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-12">
                <a data-bs-toggle="collapse" href="#block-2-block-9-block-2-block-2-block-2" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>ELSE</strong>
                  </div>
                </a>
                <div id="block-2-block-9-block-2-block-2-block-2" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>xrem = xrem - silyld(j)
silyld(j) = 0.</code></pre>
                                  
              <div class="card mb-2 ms-15">
                <a data-bs-toggle="collapse" href="#block-2-block-9-block-2-block-2-block-2-block-1" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>IF</strong> (<code>xrem <= clayld(j)</code>) <strong>THEN</strong>
                  </div>
                </a>
                <div id="block-2-block-9-block-2-block-2-block-2-block-1" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>clayld(j) = clayld(j) - xrem</code></pre>
                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-15">
                <a data-bs-toggle="collapse" href="#block-2-block-9-block-2-block-2-block-2-block-2" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-info bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>ELSE</strong>
                  </div>
                </a>
                <div id="block-2-block-9-block-2-block-2-block-2-block-2" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>xrem = xrem - clayld(j)
clayld(j) = 0.</code></pre>
                  </div>
                </div>
              </div>

                  </div>
                </div>
              </div>

                  </div>
                </div>
              </div>

                  </div>
                </div>
              </div>

                  </div>
                </div>
              </div>

                                  
              <div class="card mb-2 ms-3">
                <a data-bs-toggle="collapse" href="#block-2-block-10" 
                   aria-expanded="false" 
                   class="text-decoration-none">
                  <div class="card-header bg-warning bg-opacity-10">
                    <i class="fa fa-caret-right me-2"></i>
                    <strong>DO</strong> <code>k = 1, cs_db%num_pests</code>
                  </div>
                </a>
                <div id="block-2-block-10" class="collapse">
                  <div class="card-body">
                      <pre class="mb-0"><code>hpestb_d(j)%pest(k)%surq = hpestb_d(j)%pest(k)%surq * surq_frac
hpestb_d(j)%pest(k)%sed = hpestb_d(j)%pest(k)%sed * (1. - sed_remove / 100.)</code></pre>
                  </div>
                </div>
              </div>

                  </div>
                </div>
              </div>

        </div>
      </div>
    </div>
    <br>


    
    

    
    



    
    
    </div>
  </div>

      <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
        <div class="row justify-content-between">
          <div class="col">
            <p>
              Fortran Program
              &copy; 2025 
</p>
          </div>
          <div class="col">
            <p class="text-end">
              Documentation generated by
              <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
            </p>
          </div>
        </div>
        <br>
      </div> <!-- /container -->
    </footer>
  </body>
</html>